[package]
name = "fnox"
version = "1.2.1"
edition = "2024"
authors = ["@jdx"]
description = "A flexible secret management tool supporting multiple providers and encryption methods"
license = "MIT"
repository = "https://github.com/jdx/fnox"
readme = "README.md"
rust-version = "1.88"

[[bin]]
name = "fnox"
path = "src/main.rs"

[dependencies]
anyhow = "1"
arc-swap = "1"
async-trait = "0.1"
atty = "0.2"
base64 = "0.22"
chrono = "0.4"
ci_info = "0.14"
clap = { version = "4", features = ["derive", "env"] }
console = "0.16"
data-encoding = "2"
demand = "1"
usage-lib = { version = "2", features = ["clap"] }
dirs = "6"
futures = "0.3"
indexmap = { version = "2", features = ["serde"] }
miette = { version = "7", features = ["fancy"] }
miniz_oxide = "0.8"
regex = "1"
rmp-serde = "1"
serde = { version = "1", features = ["derive"] }
serde_json = "1"
serde_yaml = "0.9"
shellexpand = "3"
strum = { version = "0.27", features = ["derive"] }
tabled = {version = "0.20", features = ["ansi"]}
terminal_size = "0.4"
thiserror = "2"
tokio = { version = "1", features = ["full"] }
toml_edit = { version = "0.22", features = ["serde"] }
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }
walkdir = "2"
which = "7"

# Provider dependencies
age = { version = "0.11", features = ["ssh"] }
aws-config = { version = "1" }
aws-sdk-kms = { version = "1" }
aws-sdk-secretsmanager = { version = "1" }
azure_core = { version = "0.21" }
azure_identity = { version = "0.21" }
azure_security_keyvault = { version = "0.21" }
google-cloud-kms = { version = "0.6" }
google-cloud-secretmanager-v1 = { version = "1.1" }
gcp_auth = { git = "https://github.com/djc/gcp_auth", rev = "26fa225" }
keyring = { version = "3", features = ["apple-native", "windows-native", "linux-native"] }
# Required for rustls crypto provider (used by GCP SDKs)
rustls = { version = "0.23", default-features = false, features = ["aws-lc-rs", "std"] }

# Linux-specific dependencies for cross-compilation
[target.'cfg(target_os = "linux")'.dependencies]
# Vendored OpenSSL builds from source to support cross-compilation
openssl-sys = { version = "0.9", features = ["vendored"] }

[dev-dependencies]
tempfile = "3"

[build-dependencies]
indexmap = { version = "2", features = ["serde"] }
proc-macro2 = "1"
quote = "1"
serde = { version = "1", features = ["derive"] }
toml_edit = { version = "0.22", features = ["serde"] }
